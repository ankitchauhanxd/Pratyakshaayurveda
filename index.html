<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pratyaksha Ayurveda - Traditional Healing & Wellness</title>
    
    <style>
      * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Arial', sans-serif;
}

body {
    line-height: 1.6;
    color: #5A3E2B;
    background: #F4E7D1;
}

/* Header */
.header {
    background: #2E4F2E;
    padding: 1rem;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
}

.nav-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    width: 200px;
}

.nav-links {
    display: flex;
    gap: 2rem;
}

.nav-links a {
    text-decoration: none;
    color: #F4E7D1;
    font-weight: 500;
}

/* Hero Section */
.hero {
    background: linear-gradient(rgba(46, 79, 46, 0.8), rgba(46, 79, 46, 0.8)), url('hero-bg.jpg') center/cover;
    height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: #F4E7D1;
    margin-top: 70px;
}

/* Buttons */
.btn {
    background: #D97E50;
    color: #FFF;
    padding: 1rem 2rem;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

/* Sections */
.about-home, .specialisations-home, .contact, .reviews-home {
    padding: 5rem 2rem;
    text-align: center;
}

/* Specialisations (Scrollable Cards) */
.specialisation-container {
    max-width: 800px;
    margin: auto;
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    padding: 1rem 0;
    scrollbar-width: thin;
    scrollbar-color: #D97E50 #F4E7D1;
}

.specialisation-card {
    background: #FFF;
    padding: 1rem;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    min-width: 250px;
    max-width: 280px;
    text-align: center;
}

.specialisation-card img {
    width: 100%;
    border-radius: 10px;
    height: 150px;
    object-fit: cover;
}

.specialisation-card h3 {
    margin-top: 0.5rem;
}

/* Footer */
.footer {
    background: #2E4F2E;
    color: #F4E7D1;
    padding: 3rem 2rem;
    text-align: center;
}

/* Review Section */
.review-form {
    background: #FFF;
    padding: 2rem;
    border-radius: 10px;
    max-width: 500px;
    margin: auto;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.review-container {
    margin-top: 2rem;
    max-width: 800px;
    margin: auto;
}

/* Individual Review Card */
.review-card {
    background: #FFF;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

/* Profile Picture & Verified Badge */
.review-profile {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 5px;
}

.review-profile img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #D97E50;
}

/* Profile Picture*/
.profile-pic {
	width: 50px;
	height: 50px;
	border-radius: 50%;
	margin-right: 10px;
	vertical-align: middle;
	}
	
	/* Verified Badge */
.verified-badge {
   color: green;
   font-weight: bold;
   font-size: 14px;
    margin-left: 5px;
}

/* Review Content */
.review-content {
    margin-top: 0.5rem;
}  
    </style>
    
    <!-- Firebase SDK -->
   <script type="module">
    import { initializeApp  } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";   
    import { 
        getFirestore, collection, addDoc, getDocs, query, where 
    } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

    import { 
        getAuth, sendSignInLinkToEmail, isSignInWithEmailLink, signInWithEmailLink, onAuthStateChanged, signOut
    } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";

    // Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyD3CsmjOe2HKD2fDUCtlNgMwTOBqHA8nJ8",
  authDomain: "pratyaksha-ayurveda-d147f.firebaseapp.com",
  projectId: "pratyaksha-ayurveda-d147f",
  storageBucket: "pratyaksha-ayurveda-d147f.appspot.com", //
  messagingSenderId: "547427847650",
  appId: "1:547427847650:web:d8cbab4dc70223a7753dbb",
  measurementId: "G-GGKB7EX8YR"
};

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    // Detect User's Country
    async function detectCountry() {
        try {
            const response = await fetch("https://ipinfo.io/json/");
            const data = await response.json();
            document.getElementById("country").value = data.country || "Unknown";
        } catch (error) {
            console.error("Error detecting country:", error);
            document.getElementById("country").value = "Unknown";
        }
    }

    // Send Login Link to Email
    async function sendLoginEmail() {
        const email = document.getElementById("email").value;
        if (!email) {
            alert("Please enter a valid email.");
            return;
        }

        const actionCodeSettings = {
            url: "https://ankitchauhanxd.github.io/pratyakshaayurveda/review-login",
            handleCodeInApp: true
        };

        try {
            await sendSignInLinkToEmail(auth, email, actionCodeSettings);
            sessionStorage.setItem("emailForSignIn", email);
            alert("Login link sent to your email.");
        } catch (error) {
            console.error("Error sending login link:", error);
            alert("Failed to send login link. Please try again.");
        }
    }

    // Handle Sign-In when User Clicks Email Link
    window.onload = async () => {
    try {
        // Check if user is signing in with email link
        if (isSignInWithEmailLink(auth, window.location.href)) {
            let email = sessionStorage.getItem("emailForSignIn");

            if (!email) {
                email = window.prompt("Please enter your email to confirm sign-in:");
                if (!email) {
                    alert("Email is required to proceed.");
                    return;
                }
            }

            // Attempt to sign in with the email link
            const result = await signInWithEmailLink(auth, email, window.location.href);
            sessionStorage.removeItem("emailForSignIn");

            // Display user info and review form upon successful login
            document.getElementById("user-info").innerHTML = `<p>Welcome, ${result.user.email}</p>`;
            document.getElementById("review-form").style.display = "block";

            // Auto-detect and fill country
            detectCountry();
        }

        // Load reviews after authentication check
        await loadReviews();

    } catch (error) {
        console.error("Error during authentication:", error);
        alert("An error occurred during login. Please try again.");
    }
};
      await  loadReviews(); // Load reviews on page load
    };

    // Check Authentication Status
    onAuthStateChanged(auth, (user) => {
        if (user) {
            document.getElementById("user-info").innerHTML = `
                <p>Welcome, ${user.email}</p>
                <button onclick="logout()" class="btn">Logout</button>
            `;
            document.getElementById("review-form").style.display = "block";
            detectCountry(); // Auto-fill country after login
        } else {
            document.getElementById("user-info").innerHTML = `
                <input type="email" id="email" placeholder="Enter your email">
                <button onclick="sendLoginEmail()" class="btn">Send Login Link</button>
            `;
            document.getElementById("review-form").style.display = "none";
        }
    });

    // Logout Function
    window.logout = function() {
        signOut(auth).then(() => {
            document.getElementById("user-info").innerHTML = `
                <input type="email" id="email" placeholder="Enter your email">
                <button onclick="sendLoginEmail()" class="btn">Send Login Link</button>
            `;
            document.getElementById("review-form").style.display = "none";
        }).catch((error) => {
            console.error("Error during logout:", error);
        });
    };
// Submit Review
async function submitReview(event) {
    event.preventDefault();
    const user = auth.currentUser;

    if (!user) {
        alert("Please sign in to submit a review.");
        return;
    }

    const reviewText = document.getElementById("review").value.trim();
    const countrySelect = document.getElementById("country");
    const otherCountryInput = document.getElementById("otherCountry");

    // Determine country selection
    let country = countrySelect.value === "Other" ? otherCountryInput.value.trim() : countrySelect.value;

    if (!reviewText) {
        alert("Please enter your review.");
        return;
    }

    if (!country) {
        alert("Please select or enter your country.");
        return;
    }

    const profilePic = user.photoURL || "default-avatar.png"; // Default profile pic

    try {
        await addDoc(collection(db, "reviews"), {
            name: user.email,
            review: reviewText,
            country: country,
            approved: false, // Admin must approve before displaying
            profilePic: profilePic,
            timestamp: serverTimestamp() // Optional: Store submission time
        });

        alert("Review submitted for approval.");
        
        // Reset form fields after submission
        document.getElementById("review").value = "";
        countrySelect.value = "";
        otherCountryInput.value = "";
        otherCountryInput.style.display = "none"; // Hide "Other" input
       
        loadReviews(); // Refresh displayed reviews
    } catch (error) {
        console.error("Error adding review:", error);
        alert("Failed to submit review. Try again.");
    }
}

// Load Approved Reviews (Show Verified Badge for Approved Reviews)
async function loadReviews() {
    const reviewContainer = document.getElementById("reviews-container");
    reviewContainer.innerHTML = "";

    const q = query(collection(db, "reviews"), where("approved", "==", true));
    const querySnapshot = await getDocs(q);

    querySnapshot.forEach((doc) => {
        const data = doc.data();
        const verifiedBadge = '<span class="verified-badge">✔ Verified</span>'; // Verified badge

        const reviewCard = `
            <div class="review-card">
                <div class="review-profile">
                    <img src="${data.profilePic}" class="profile-pic" alt="Profile Picture">
                    <h4>${data.name} ${verifiedBadge}</h4>
                </div>
                <p><strong>Country:</strong> ${data.country || "Unknown"}</p>
                <p>${data.review}</p>
            </div>`;
        
        reviewContainer.innerHTML += reviewCard;
    });
}

// Load reviews on page load
document.addEventListener("DOMContentLoaded", loadReviews);
</script>
</head>

<body>
    <header class="header">
        <nav class="nav-container">
            <img src="logo.png" alt="Pratyaksha Ayurveda" class="logo">
            <div class="nav-links">
                <a href="#home">Home</a>
                <a href="#specialisations">Our Specialisations</a>
                <a href="about.html">About</a>
                <a href="#contact">Contact</a>
            </div>
        </nav>
    </header>

    <section class="hero" id="home">
        <div class="hero-content">
            <h1>Experience Authentic Ayurveda</h1>
            <p>Traditional Healing for Modern Life</p>
            <button class="btn" onclick="window.open('https://wa.me/918708880341')">Book your Online Consultation</button>
        </div>
    </section>

    <!-- About Section -->
    <section class="about-home">
        <h2>About Pratyaksha Ayurveda</h2>
        <p>Promoting Authentic Ayurveda Rooted in Tradition, Backed by Science. Restoring Balance, Not Just Symptoms.</p>
        <p>Founded by <strong>Dr. Ankit Chauhan (BAMS)</strong>, an Ayurveda Specialist, Pratyaksha Ayurveda is dedicated to bringing holistic healing with time-tested Ayurvedic practices.</p>
    </section>

    <!-- Our Specialisations Section -->
    <section class="specialisations-home" id="specialisations">
        <h2>Our Specialisations</h2>
        <div class="specialisation-container">
            <div class="specialisation-card">
                <img src="images/joint-disorders.jpg" alt="Joint Disorders">
                <h3>Joint Disorders</h3>
                <p>Ayurvedic solutions for arthritis, osteoporosis, and joint pain.</p>
            </div>
            <div class="specialisation-card">
                <img src="images/digestive-disorders.jpg" alt="Digestive Disorders">
                <h3>Digestive Disorders</h3>
                <p>Treatments for acidity, IBS, and gut health.</p>
            </div>
            <div class="specialisation-card">
                <img src="images/sinusitis.jpg" alt="Sinusitis & Rhinitis">
                <h3>Sinusitis & Rhinitis</h3>
                <p>Ayurvedic nasal therapies and immune-boosting techniques.</p>
            </div>
            <div class="specialisation-card">
                <img src="images/migraine.jpg" alt="Headache & Migraine">
                <h3>Headache & Migraine</h3>
                <p>Shirodhara, herbal remedies, and dosha balancing.</p>
            </div>
            <div class="specialisation-card">
                <img src="images/fever-management.jpg" alt="Fever Management">
                <h3>Fever Management</h3>
                <p>Natural detox and immunity-restoring remedies.</p>
            </div>
            <div class="specialisation-card">
                <img src="images/thyroid.jpg" alt="Thyroid Disorders">
                <h3>Thyroid Disorders</h3>
                <p>Herbal treatments and lifestyle modifications.</p>
            </div>
        </div>
        <a href="specialised.html" class="btn">Learn More</a>
    </section>
    
<section class="reviews-home">
    <h2>Reviews</h2>

    <!-- User Login Info -->
    <div id="user-info"></div>

    <!-- Review Submission Form (Hidden Until Login) -->
    <form id="review-form" class="review-form" style="display: none;" onsubmit="submitReview(event)">
        <textarea id="review" placeholder="Your Review" required></textarea><br><br>
        <label for="country">Select Your Country:</label>
<select id="country" required>
    <option value="" disabled selected>Select your country</option>
    <option value="India">India</option>
    <option value="United States">United States</option>
    <option value="United Kingdom">United Kingdom</option>
    <option value="Canada">Canada</option>
    <option value="Australia">Australia</option>
    <option value="Germany">Germany</option>
    <option value="France">France</option>
    <option value="China">China</option>
    <option value="Japan">Japan</option>
    <option value="Brazil">Brazil</option>
    <option value="South Africa">South Africa</option>
    <option value="Other">Other</option>
</select>
<!-- Hidden input for 'Other' option -->
	<input type="text" id="othercountry"
	placeholder="Enter your country"
	style="display: none; margin-top: 10px;">
        <button class="btn" type="submit">Submit Review</button>
    </form>

    <div class="review-container" id="reviews-container"></div>
</section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <h2>Contact Us</h2>
        <p>Email: <a href="mailto:pratyakshaayurveda@gmail.com">pratyakshaayurveda@gmail.com</a></p>
        <p>WhatsApp: <a href="https://wa.me/918708880341">+91 8708880341</a></p>
        <p>Instagram: <a href="https://instagram.com/ankitchauhan.xd">@ankitchauhan.xd</a></p>
    </section>

    <footer class="footer">
        <p>&copy; 2025 Pratyaksha Ayurveda. All rights reserved.</p>
    </footer>
</body>
</html>
